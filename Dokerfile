# Dockerfile para Cadastro de Produtos Nuvemshop - Gama Laser
FROM nginx:alpine

# Metadados
LABEL maintainer="Gama Laser"
LABEL description="Sistema de cadastro de produtos Nuvemshop"
LABEL version="1.0.0"

# Instalar certificados para HTTPS
RUN apk add --no-cache ca-certificates

# Copiar arquivo HTML para o diretório do nginx
COPY index.html /usr/share/nginx/html/index.html

# Copiar configuração customizada do nginx
COPY nginx.conf /etc/nginx/nginx.conf

# Definir permissões corretas
RUN chmod 644 /usr/share/nginx/html/index.html && \
    chmod 644 /etc/nginx/nginx.conf

# Expor porta 80
EXPOSE 80

# Healthcheck
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost/ || exit 1

# Comando para iniciar o nginx
CMD ["nginx", "-g", "daemon off;"]
